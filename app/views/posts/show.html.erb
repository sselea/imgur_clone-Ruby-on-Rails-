<div class="container-fluid">
	<div class="row">
		<div class="col-md-4">
		</div>
		<div class="col-md-4 post_wrapper_in_show text-center">
			<p class="post_title"><%= @post.title %> </p>
			<img src="<%= @post.source %>" class="post_pic">
		</div>
		<div class="col-md-4">
		</div>
  </div>
</div>

<div class= "row container-fluid text-center">
	<div class="col-md-3"></div>
	<div class="col-md-6 all_comments_container">

			
				<% @post.comments.order(points: :desc).each do |comment| %>

					

					<% if comment.user %>

						<div class="comment_container text-left">
						
							<div class="row">
								<div class="col-md-6 col-sm-12">
											<div class="comment_description"><%= comment.description %></div>
											<span class="added_on"> by <%= comment.user.email %> added on: <%= comment.created_at %></span>
								</div>	

								<div class="col-md-3">
									<div class="row">
										<div class=" col-md-6 upvote_button">

											<%= form_for [@post,comment] do |f| %>
												<%= hidden_field_tag :vote, 1 %>
												<%= f.submit ' + ', :class => "btn btn-sm btn-primary " %>
											<% end %>
										</div>

										<div class=" col-md-6 downvote_button">
											<%= form_for [@post,comment] do |f| %>
												<%= hidden_field_tag :vote, -1 %>
												<%= f.submit ' - ', :class => "btn btn-sm btn-primary " %>
											<% end %>
										</div>
									</div>
								</div>	

								<div class= "col-md-1">
									<p class="points"><%= comment.points %></p>
								</div>

								<div class= "col-md-2">
									<button type="submit" class="btn btn-sm reply_button" data-comment-id="<%= comment.id %>" data-comment-description="<%= comment.description %>">Reply</button>
								</div>
							</div>

						</div>

						
						<% comment.nested_comments.each_with_index do |nested_comment, indent_counter|%>

							<% x = (indent_counter)/6  %>
							<% if x % 2 == 0  %>
								
								<div class="row">

									<div class="col-md-6 col-md-offset-<%=indent_counter + 1 %> nested_comments">
										<span class="nested_comment_text"><%=nested_comment.description %>
									</div>
									<div class="col-md-6"></div>
								</div>

							<% end %>

							<% if x % 2 == 1 %>
								
									<div class="row">

										<div class="col-md-6 col-md-offset-<%= 6 - (indent_counter - 5)  %> nested_comments">
											<span class="nested_comment_text"><%= nested_comment.description %><%= indent_counter %> </span>
										</div>
										<div class="col-md-6"></div>
									</div>
						
							<% end %>
				
						<% end %>

					<% end %>
				<% end %>
		</div>
		<div class="col-md-3"></div>
</div>



<% if current_user %>

	<div class="row container-fluid ">
		<div class="col-md-4"></div>
		<div class="col-md-4 text-center">
			<%= form_for([@post,@comment], html: {class:"form-inline comment_form",role:"form"}) do |f| %>

				<% if @post.errors.any? %>

					<div id="error_explanation">
			     <h4><%= pluralize(@comment.errors.count, "error") %> prohibited this product from being saved:</h4>
			     <ul>
			       <% @comment.errors.full_messages.each do |msg| %>
			         <li><%= msg %></li>
			       <% end %>
			         <hr>
			     </ul>
			    </div>
			  <% end %>

				<%= f.label :description, "Comment", :class => " comment_label " %>
			  <div class="field form-group">
			  <%= f.text_area :description, :class => "form-control" %>
				</div>
				<%= hidden_field_tag :parent_id %>
				<button type:"submit" class="btn btn-warning btn-sm comment_submit">Submit</button>
			<% end %>
		</div>
		<div class="col-md-4"></div>
	</div>
<% end %>

